<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commodity Performance Dashboard</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <style>
        /* Minimal CSS framework for layout */
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .card-header { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 15px; border-radius: 8px 8px 0 0; display: flex; justify-content: space-between; align-items: center; }
        .card-body { padding: 20px; }
        .btn { background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.5); padding: 8px 16px; border-radius: 4px; cursor: pointer; text-decoration: none; display: inline-block; }
        .btn:hover { background: white; color: #f5576c; }
        .table { width: 100%; border-collapse: collapse; }
        .table th, .table td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
        .table th { background: #343a40; color: white; font-weight: bold; }
        .table tr:hover { background: #f8f9fa; }
        .text-center { text-align: center; }
        .text-muted { color: #6c757d; }
        .mt-3 { margin-top: 15px; }
        .mb-0 { margin-bottom: 0; }
        .spinner { display: inline-block; width: 20px; height: 20px; border: 3px solid #f3f3f3; border-top: 3px solid #3498db; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="container">
        <header class="text-center" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 10px; margin-bottom: 30px;">
            <h1>Commodity Performance Comparison Dashboard</h1>
            <p class="text-muted" style="color: rgba(255,255,255,0.8) !important;">Real-time commodity prices and yield analysis</p>
        </header>

        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Commodity Prices Over Time</h5>
                <button class="btn" onclick="refreshPrices()">Refresh Data</button>
            </div>
            <div class="card-body">
                <div id="commodity-prices-table">
                    <div class="text-center">
                        <div class="spinner"></div> Loading...
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">Yields and Costs Analysis</h5>
                <button class="btn" onclick="refreshYields()">Refresh Data</button>
            </div>
            <div class="card-body">
                <div id="yields-costs-table">
                    <div class="text-center">
                        <div class="spinner"></div> Loading...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Simple AJAX functionality to replace HTMX
        function loadTable(endpoint, targetId) {
            fetch(endpoint)
                .then(response => response.text())
                .then(html => {
                    document.getElementById(targetId).innerHTML = html;
                })
                .catch(error => {
                    document.getElementById(targetId).innerHTML = '<p style="color: red;">Error loading data: ' + error.message + '</p>';
                });
        }

        function refreshPrices() {
            document.getElementById('commodity-prices-table').innerHTML = '<div class="text-center"><div class="spinner"></div> Loading...</div>';
            loadTable('/tables/commodity-prices', 'commodity-prices-table');
        }

        function refreshYields() {
            document.getElementById('yields-costs-table').innerHTML = '<div class="text-center"><div class="spinner"></div> Loading...</div>';
            loadTable('/tables/yields-costs', 'yields-costs-table');
        }

        // Load tables on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadTable('/tables/commodity-prices', 'commodity-prices-table');
            loadTable('/tables/yields-costs', 'yields-costs-table');
        });
    </script>
</body>
</html>